{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}
<style>
    body {
        background-color: #f5f5dc; /* бежевый */
        color: #3e2723; /* тёмно-коричневый */
    }

    h2, legend {
        color: #5d4037; /* коричневый */
    }

    form {
        background-color: #ffffff; /* белый */
        padding: 2rem;
        border-radius: 1rem;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        max-width: 700px;
        margin: auto;
    }

    .btn-outline-info {
        border-color: #5d4037;
        color: #5d4037;
    }

    .btn-outline-info:hover {
        background-color: #5d4037;
        color: white;
    }

    .form-group {
        margin-top: 1rem;
    }

    select, input, textarea {
        border-radius: 0.5rem;
        border: 1px solid #ccc;
        padding: 0.5rem;
    }
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll(".foreign-key-popup-select").forEach(function (select) {
        const url = select.getAttribute("data-popup-url");
        if (!url) return;

        const plus = document.createElement("a");
        plus.href = "#";
        plus.innerHTML = "➕";
        plus.style.marginLeft = "10px";

        plus.addEventListener("click", function (e) {
            e.preventDefault();
            const popup = window.open(url, "popup", "height=500,width=800,resizable=yes,scrollbars=yes");
            popup.focus();
        });

        select.parentNode.appendChild(plus);
    });
});
</script>

<script>
function dismissAddAnotherPopup(win, newId, newRepr, fieldName) {
    const select = document.querySelector(`select[name="${fieldName}"]`);
    if (select) {
        const option = new Option(newRepr, newId, true, true);
        select.add(option);
        select.value = newId;
    }
    win.close();
}
</script>


<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <fieldset class="form-group">
        <legend class="border-bottom mb-4"><h1>Добавить книгу</h1></legend>
        {{ form|crispy }}
    </fieldset>
    <div class="form-group">
        <button class="btn btn-outline-info" type="submit">Сохранить</button>
    </div>
</form>

    {% for book in books %}
        <a href="{% url 'book_detail' book.id %}">{{ book.title }}</a>
    {% endfor %}

{% endblock %}
